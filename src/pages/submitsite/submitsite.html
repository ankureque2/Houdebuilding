<!--
  Generated template for the Submitsite page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
<ion-toolbar color='navbarColor'>
    <ion-title>Submit Site</ion-title>
    <ion-buttons start>
      <button ion-button icon-only (click)="dismiss()">      
       <ion-icon name="md-close"></ion-icon>
     </button>     
    </ion-buttons>	
   </ion-toolbar> 
</ion-header>
<ion-content padding>
<div *ngIf="!submitCompleted">
<ion-item>
      <ion-label>Progress Date</ion-label>
      <ion-datetime displayFormat="DD/MM/YYYY" max={{currentDate}} [(ngModel)]="progressDate"></ion-datetime>
</ion-item>

      <br/>
      <br/>
      <br/>
      <button ion-button no-padding no-margin block icon-left color="primary2" [disabled]="disableSubmit" (click)='showSubmitQuestion()'>
          <ion-icon item-left ios="md-cloud-upload" md="md-cloud-upload"> </ion-icon>
              Submit Site Progress
      </button>
  </div>
  <div *ngIf= "submitCompleted">
    <h3 *ngIf="!hasWarnings">
        Site Progress Submitted successfully.
    </h3>    
    <div *ngIf="hasWarnings">     
    <ion-list>
         <h3 text-wrap no-padding no-margin *ngIf="hasWarnings">
             Site Progress Submitted with following warnings.
          </h3>   
        <!--<ion-list-header text-wrap no-padding no-margin>           
                Site Progress Submitted with following warnings.   
        </ion-list-header>-->
         <ion-item text-wrap no-padding no-margin *ngFor="let plot of StageWarnings">
            <ion-row no-padding no-margin>
                <ion-col>
                    {{plot.PlotName}}
                </ion-col>
                 <ion-col col-auto>
                    {{plot.StageName}}
                </ion-col>
                  <!--<ion-col>
                    {{plot.ActualProgress}}
                </ion-col>-->
            </ion-row>
            <ion-row>
                 {{plot.Message}}
            </ion-row>
         </ion-item>
    </ion-list>
    <ion-list>
         <ion-item text-wrap no-padding no-margin *ngFor="let app of AppWarnings">
              <ion-row no-padding no-margin>
                <ion-col width-40>
                    {{app.Description}}
                </ion-col>
                 <ion-col width-20>
                    {{app.PlotName}}
                </ion-col>   
                 <ion-col width-40>
                    {{app.StageName}}
                </ion-col>                     
            </ion-row>
            <ion-row>
                {{app.Message}}
            </ion-row>
         </ion-item>
    </ion-list>
    </div>
     <button *ngIf="!hasWarnings" ion-button no-padding no-margin block color="primary2" (click)='dismiss()'>          
             Close
     </button>
     <ion-row no-padding no-margin *ngIf="hasWarnings">
         <ion-col width-50>
            <button  ion-button no-padding no-margin full color="primary2" (click)='dismiss()'>          
                    Close
            </button>
         </ion-col>
         <ion-col width-50>
              <button  ion-button no-padding no-margin full color="primary2" (click)='btnRefreshData_clicked()'>          
                    Refresh Site
            </button>
         </ion-col>
     </ion-row>
  </div>
</ion-content>
